<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AaronOS v5 – Unified Dashboard</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="theme-perplexity.css">
  <style>
    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }

    .card h2 {
      margin-top: 0;
      color: #fff;
      font-size: 1.5rem;
    }

    .card p {
      margin: 0.5rem 0 1rem;
      line-height: 1.6;
    }

    .wizard-grid {
      display: grid;
      gap: 1.5rem;
    }

    .discovery-list,
    .issues-list {
      display: grid;
      gap: 0.75rem;
      padding: 0;
      margin: 0;
      list-style: none;
    }

    .discovery-list li,
    .issues-list li {
      padding: 1rem;
      border-radius: 8px;
      background: rgba(148, 163, 184, 0.08);
      border: 1px solid rgba(148, 163, 184, 0.2);
    }

    .issues-list strong {
      color: #fff;
    }

    .stepper button {
      counter-increment: step;
    }

    .stepper button::before {
      content: counter(step);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 2rem;
      height: 2rem;
      margin-bottom: 0.35rem;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.1);
      color: inherit;
      font-weight: 600;
    }

    .scanning-summary {
      display: grid;
      gap: 0.75rem;
    }

    .scanning-summary div {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.75rem 1rem;
      border-radius: 8px;
      background: rgba(20, 184, 166, 0.08);
      border: 1px solid rgba(20, 184, 166, 0.25);
      color: #fff;
      font-weight: 600;
    }

    .filters {
      display: flex;
      gap: 0.75rem;
      flex-wrap: wrap;
    }

    .filters button {
      flex: 1 1 160px;
    }

    .export-options {
      display: grid;
      gap: 1rem;
    }

    .export-options label {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .export-options input {
      width: auto;
    }

    @media (max-width: 768px) {
      .stepper {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }

      .stepper button::after {
        content: '';
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>AaronOS v5</h1>
    <nav aria-label="Primary navigation">
      <button type="button" class="button btn-secondary">Dashboard</button>
      <button type="button" class="button btn-secondary">Scanner</button>
      <button type="button" class="button btn-secondary">Outreach</button>
    </nav>
  </header>

  <main>
    <section class="card" aria-labelledby="scanner-wizard-title">
      <ol class="stepper" aria-label="WCAG scanner steps">
        <li>
          <button type="button" class="button active" aria-current="step" data-step="1" data-label="Configure" aria-controls="step-1">
            <span class="sr-only">Step 1</span>
          </button>
        </li>
        <li>
          <button type="button" class="button" data-step="2" data-label="Discovery" aria-controls="step-2">
            <span class="sr-only">Step 2</span>
          </button>
        </li>
        <li>
          <button type="button" class="button" data-step="3" data-label="Scanning" aria-controls="step-3">
            <span class="sr-only">Step 3</span>
          </button>
        </li>
        <li>
          <button type="button" class="button" data-step="4" data-label="Overview" aria-controls="step-4">
            <span class="sr-only">Step 4</span>
          </button>
        </li>
        <li>
          <button type="button" class="button" data-step="5" data-label="Drilldown" aria-controls="step-5">
            <span class="sr-only">Step 5</span>
          </button>
        </li>
      </ol>

      <h2 id="scanner-wizard-title">WCAG Scanner Wizard</h2>
      <p id="wizard-description">Configure your accessibility scan, monitor progress, and export actionable reports.</p>

      <div class="wizard-grid" aria-live="polite">
        <article id="step-1" class="wizard-step active" role="tabpanel" aria-labelledby="step-label-1">
          <h3 id="step-label-1">Step 1: Configure Scan</h3>
          <p>Choose your scan type and provide the source you want the AaronOS engine to audit.</p>
          <form id="scan-form" class="scan-form">
            <div class="form-group">
              <span id="scan-type-label" class="form-label">Scan type</span>
              <div class="radio-group" role="radiogroup" aria-labelledby="scan-type-label">
                <div class="radio-option">
                  <input type="radio" id="type-url" name="scanType" value="url" checked>
                  <label for="type-url">Public URL</label>
                </div>
                <div class="radio-option">
                  <input type="radio" id="type-html" name="scanType" value="html">
                  <label for="type-html">HTML snippet</label>
                </div>
              </div>
            </div>

            <div class="form-group" id="url-input-group">
              <label for="url-input">Website URL</label>
              <input
                type="url"
                id="url-input"
                name="url"
                placeholder="https://example.com"
                aria-describedby="url-hint"
                required
              >
              <small id="url-hint" class="hint">Enter the full URL including https://</small>
            </div>

            <div class="form-group hidden" id="html-input-group">
              <label for="html-input">HTML to audit</label>
              <textarea
                id="html-input"
                name="html"
                rows="8"
                placeholder="Paste your HTML code here…"
                aria-describedby="html-hint"
              ></textarea>
              <small id="html-hint" class="hint">We will run axe-core against this markup.</small>
            </div>

            <button type="submit" class="button btn-primary" id="scan-button">
              <span class="btn-text">Queue scan</span>
            </button>
          </form>
          <div class="status-log" id="scan-status" aria-live="polite">
            <p>Provide a URL or HTML snippet to begin.</p>
          </div>
        </article>

        <article id="step-2" class="wizard-step" role="tabpanel" aria-labelledby="step-label-2" aria-hidden="true">
          <h3 id="step-label-2">Step 2: Discovery</h3>
          <p>Select the domains you'd like to include in the scan.</p>
          <ul class="discovery-list">
            <li>
              <label>
                <input type="checkbox" name="domain" value="example.com" checked>
                example.com – Official site
              </label>
            </li>
            <li>
              <label>
                <input type="checkbox" name="domain" value="inclusivedesign.io">
                inclusivedesign.io – Accessibility insights blog
              </label>
            </li>
            <li>
              <label>
                <input type="checkbox" name="domain" value="accessibility.gov">
                accessibility.gov – Compliance resources
              </label>
            </li>
          </ul>
        </article>

        <article id="step-3" class="wizard-step" role="tabpanel" aria-labelledby="step-label-3" aria-hidden="true">
          <h3 id="step-label-3">Step 3: Scanning</h3>
          <div class="progress-indicator">
            <div class="spinner" role="progressbar" aria-valuetext="Scanning in progress"></div>
            <div>
              <p>Scanning in progress…</p>
              <p aria-live="assertive">Estimated time remaining: <span id="scan-timer">45</span> seconds</p>
            </div>
          </div>
          <div class="scanning-summary">
            <div><span>Pages queued</span><span id="pages-queued">18</span></div>
            <div><span>Critical errors</span><span id="critical-errors">0</span></div>
            <div><span>Warnings</span><span id="warning-count">0</span></div>
          </div>
        </article>

        <article id="step-4" class="wizard-step" role="tabpanel" aria-labelledby="step-label-4" aria-hidden="true">
          <h3 id="step-label-4">Step 4: Overview</h3>
          <p>Review the automatically generated insights from the most recent scan.</p>
          <div class="summary-cards" role="list">
            <div class="card" role="listitem">
              <h4>Compliance score</h4>
              <div class="score" id="compliance-score">--</div>
              <p class="card-subtitle">WCAG 2.2 AA coverage</p>
            </div>
            <div class="card" role="listitem">
              <h4>Violations</h4>
              <div class="count count-error" id="violations-count">0</div>
              <p class="card-subtitle">Issues to remediate</p>
            </div>
            <div class="card" role="listitem">
              <h4>Passes</h4>
              <div class="count count-success" id="passes-count">0</div>
              <p class="card-subtitle">WCAG checks passed</p>
            </div>
            <div class="card" role="listitem">
              <h4>Scan time</h4>
              <div class="time" id="scan-time">--</div>
              <p class="card-subtitle">Duration to finish</p>
            </div>
          </div>
          <div class="filters" role="group" aria-label="Filter results">
            <button type="button" class="button btn-secondary">Focus order</button>
            <button type="button" class="button btn-secondary">Color contrast</button>
            <button type="button" class="button btn-secondary">Landmarks</button>
            <button type="button" class="button btn-secondary">Forms</button>
          </div>
        </article>

        <article id="step-5" class="wizard-step" role="tabpanel" aria-labelledby="step-label-5" aria-hidden="true">
          <h3 id="step-label-5">Step 5: Drilldown &amp; Export</h3>
          <p>Investigate each violation cluster and export the dataset for engineering follow-up.</p>
          <div class="severity-breakdown" aria-live="polite">
            <h4>Violations by severity</h4>
            <div class="severity-bars">
              <div class="severity-item">
                <label for="bar-critical">Critical</label>
                <div class="bar-container">
                  <div class="bar bar-critical" id="bar-critical" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"></div>
                  <span class="bar-count" id="count-critical">0</span>
                </div>
              </div>
              <div class="severity-item">
                <label for="bar-serious">Serious</label>
                <div class="bar-container">
                  <div class="bar bar-serious" id="bar-serious" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"></div>
                  <span class="bar-count" id="count-serious">0</span>
                </div>
              </div>
              <div class="severity-item">
                <label for="bar-moderate">Moderate</label>
                <div class="bar-container">
                  <div class="bar bar-moderate" id="bar-moderate" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"></div>
                  <span class="bar-count" id="count-moderate">0</span>
                </div>
              </div>
              <div class="severity-item">
                <label for="bar-minor">Minor</label>
                <div class="bar-container">
                  <div class="bar bar-minor" id="bar-minor" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"></div>
                  <span class="bar-count" id="count-minor">0</span>
                </div>
              </div>
            </div>
          </div>

          <div class="violations-section">
            <h4>Detailed violations</h4>
            <ul id="violations-list" class="issues-list"></ul>
          </div>

          <div class="export-section" role="group" aria-label="Export options">
            <button type="button" class="button btn-secondary" id="export-json">Export JSON</button>
            <button type="button" class="button btn-secondary" id="export-csv">Export CSV</button>
            <button type="button" class="button btn-primary" id="export-btn">Export PDF report</button>
          </div>
          <div class="status-log" aria-live="assertive" id="export-status">
            <p>No export requested yet.</p>
          </div>
        </article>
      </div>

      <div class="button-group">
        <button type="button" class="button btn-secondary" id="prev-btn" disabled>Previous</button>
        <button type="button" class="button btn-primary" id="next-btn">Next</button>
      </div>
    </section>
  </main>

  <script>
    const steps = Array.from(document.querySelectorAll('.wizard-step'));
    const stepButtons = Array.from(document.querySelectorAll('.stepper button'));
    const prevBtn = document.getElementById('prev-btn');
    const nextBtn = document.getElementById('next-btn');
    const exportStatus = document.getElementById('export-status');
    const exportBtn = document.getElementById('export-btn');
    const exportJsonBtn = document.getElementById('export-json');
    const exportCsvBtn = document.getElementById('export-csv');
    const scanTimer = document.getElementById('scan-timer');
    const pagesQueued = document.getElementById('pages-queued');
    const criticalErrors = document.getElementById('critical-errors');
    const warningCount = document.getElementById('warning-count');
    const scanForm = document.getElementById('scan-form');
    const scanStatus = document.getElementById('scan-status');
    const urlInputGroup = document.getElementById('url-input-group');
    const htmlInputGroup = document.getElementById('html-input-group');
    const urlInput = document.getElementById('url-input');
    const htmlInput = document.getElementById('html-input');
    const complianceScore = document.getElementById('compliance-score');
    const violationsCount = document.getElementById('violations-count');
    const passesCount = document.getElementById('passes-count');
    const scanTimeValue = document.getElementById('scan-time');
    const severityBars = {
      critical: document.getElementById('bar-critical'),
      serious: document.getElementById('bar-serious'),
      moderate: document.getElementById('bar-moderate'),
      minor: document.getElementById('bar-minor')
    };
    const severityCounts = {
      critical: document.getElementById('count-critical'),
      serious: document.getElementById('count-serious'),
      moderate: document.getElementById('count-moderate'),
      minor: document.getElementById('count-minor')
    };
    const violationsList = document.getElementById('violations-list');

    let currentStep = 0;
    let scanInterval;
    let resultsReady = false;

    const sampleResults = {
      complianceScore: 92,
      violations: 14,
      passes: 318,
      scanTime: '3m 42s',
      severity: {
        critical: 3,
        serious: 5,
        moderate: 4,
        minor: 2
      },
      issues: [
        {
          title: 'WCAG 2.4.7 Focus Visible',
          severity: 'critical',
          description: 'Primary navigation links remove outlines on focus, preventing keyboard users from tracking location.',
          fix: 'Restore a visible focus ring with at least a 3:1 contrast ratio.',
          target: 'nav.primary-menu a',
          instances: 3
        },
        {
          title: 'WCAG 1.4.3 Contrast (Minimum)',
          severity: 'serious',
          description: 'Hero call-to-action text sits on a gradient with insufficient 2.8:1 contrast.',
          fix: 'Increase text color contrast to at least 4.5:1 or adjust the background tone.',
          target: '.hero .cta-button',
          instances: 5
        },
        {
          title: 'WCAG 3.3.2 Labels or Instructions',
          severity: 'moderate',
          description: 'Checkout form inputs do not have programmatic labels, impacting screen reader flows.',
          fix: 'Associate <label> elements with inputs using matching for/id attributes.',
          target: '#checkout-form input',
          instances: 4
        },
        {
          title: 'WCAG 1.1.1 Non-text Content',
          severity: 'minor',
          description: 'Decorative icons include redundant alt text that creates noise for assistive tech.',
          fix: 'Mark decorative images with empty alt attributes or role="presentation".',
          target: '.feature-icon img',
          instances: 2
        }
      ]
    };

    const severityLabels = {
      critical: 'Critical',
      serious: 'Serious',
      moderate: 'Moderate',
      minor: 'Minor'
    };

    function setStep(newStep, options = {}) {
      const { focusPanel = false } = options;
      if (newStep < 0 || newStep >= steps.length) return;

      if (scanInterval && newStep !== 2) {
        clearInterval(scanInterval);
        scanInterval = undefined;
      }

      steps.forEach((panel, index) => {
        const isActive = index === newStep;
        panel.classList.toggle('active', isActive);
        panel.setAttribute('aria-hidden', String(!isActive));
      });

      stepButtons.forEach((btn, index) => {
        const isActive = index === newStep;
        btn.classList.toggle('active', isActive);
        if (isActive) {
          btn.setAttribute('aria-current', 'step');
        } else {
          btn.removeAttribute('aria-current');
        }
      });

      prevBtn.disabled = newStep === 0;
      nextBtn.textContent = newStep === steps.length - 1 ? 'Finish' : 'Next';
      currentStep = newStep;

      if (focusPanel) {
        const focusable = steps[newStep].querySelector(
          'input, select, textarea, button, [tabindex]'
        );
        if (focusable) {
          focusable.focus({ preventScroll: true });
        }
      }

      if (newStep >= 3 && resultsReady) {
        populateResults();
      }
    }

    function handleStepperClick(event) {
      const target = event.target.closest('button[data-step]');
      if (!target) return;
      const targetStep = parseInt(target.dataset.step, 10) - 1;
      setStep(targetStep, { focusPanel: true });
      if (targetStep === 2) {
        simulateScanProgress();
      }
    }

    function handleScanTypeChange() {
      const selected = document.querySelector('input[name="scanType"]:checked')?.value ?? 'url';
      const isHtml = selected === 'html';
      urlInputGroup.classList.toggle('hidden', isHtml);
      htmlInputGroup.classList.toggle('hidden', !isHtml);
      urlInput.required = !isHtml;
      htmlInput.required = isHtml;
    }

    function handleScanSubmit(event) {
      event.preventDefault();
      const selected = document.querySelector('input[name="scanType"]:checked')?.value ?? 'url';
      const inputValue = selected === 'html' ? htmlInput.value.trim() : urlInput.value.trim();
      const descriptor = selected === 'html' ? 'HTML snippet' : 'URL';
      const summaryTarget = selected === 'html' ? 'provided markup' : inputValue || 'your target';
      scanStatus.innerHTML = `<p>Queued ${descriptor} scan for <strong>${summaryTarget}</strong>.</p>`;
      setTimeout(() => setStep(1, { focusPanel: true }), 400);
    }

    function resetResults() {
      complianceScore.textContent = '--';
      violationsCount.textContent = '0';
      passesCount.textContent = '0';
      scanTimeValue.textContent = '--';
      Object.values(severityCounts).forEach((el) => {
        el.textContent = '0';
      });
      Object.values(severityBars).forEach((bar) => {
        bar.style.setProperty('--progress', 0);
        bar.setAttribute('aria-valuenow', '0');
      });
      violationsList.innerHTML = '';
      exportStatus.innerHTML = '<p>No export requested yet.</p>';
    }

    function populateResults() {
      complianceScore.textContent = `${sampleResults.complianceScore}%`;
      violationsCount.textContent = String(sampleResults.violations);
      passesCount.textContent = String(sampleResults.passes);
      scanTimeValue.textContent = sampleResults.scanTime;
      updateSeverityBars(sampleResults.severity);
      renderViolations(sampleResults.issues);
    }

    function updateSeverityBars(severity) {
      const total = Object.values(severity).reduce((sum, value) => sum + value, 0);
      Object.entries(severity).forEach(([level, count]) => {
        const percent = total ? Math.round((count / total) * 100) : 0;
        severityBars[level].style.setProperty('--progress', percent / 100);
        severityBars[level].setAttribute('aria-valuenow', String(percent));
        severityCounts[level].textContent = String(count);
      });
    }

    function renderViolations(issues) {
      violationsList.innerHTML = '';
      issues.forEach((issue) => {
        const item = document.createElement('li');

        const header = document.createElement('div');
        header.className = 'violation-header';

        const title = document.createElement('strong');
        title.textContent = issue.title;
        header.appendChild(title);

        const badge = document.createElement('span');
        badge.className = `badge badge-${issue.severity}`;
        badge.textContent = severityLabels[issue.severity] ?? issue.severity;
        header.appendChild(badge);

        item.appendChild(header);

        const description = document.createElement('p');
        description.textContent = issue.description;
        item.appendChild(description);

        if (issue.target) {
          const target = document.createElement('p');
          target.className = 'hint';
          target.innerHTML = `Affected element: <code>${issue.target}</code>`;
          item.appendChild(target);
        }

        if (issue.fix) {
          const fix = document.createElement('p');
          fix.className = 'hint';
          fix.textContent = `Fix suggestion: ${issue.fix}`;
          item.appendChild(fix);
        }

        if (issue.instances) {
          const count = document.createElement('p');
          count.className = 'hint';
          count.textContent = `Occurrences: ${issue.instances}`;
          item.appendChild(count);
        }

        violationsList.appendChild(item);
      });
    }

    function simulateScanProgress() {
      scanTimer.textContent = '45';
      pagesQueued.textContent = '18';
      criticalErrors.textContent = '0';
      warningCount.textContent = '0';

      resultsReady = false;
      resetResults();
      scanStatus.innerHTML = '<p>Scan running… we will notify you when the overview is ready.</p>';

      let timeRemaining = 45;
      let queued = 18;

      clearInterval(scanInterval);
      scanInterval = setInterval(() => {
        if (timeRemaining > 0) {
          timeRemaining -= 1;
          scanTimer.textContent = String(timeRemaining);
          if (queued > 0 && timeRemaining % 5 === 0) {
            queued = Math.max(queued - 3, 0);
            pagesQueued.textContent = String(queued);
          }
          if (timeRemaining % 11 === 0) {
            criticalErrors.textContent = String(parseInt(criticalErrors.textContent, 10) + 1);
          }
          if (timeRemaining % 7 === 0) {
            warningCount.textContent = String(parseInt(warningCount.textContent, 10) + 1);
          }
        } else {
          clearInterval(scanInterval);
          scanInterval = undefined;
          pagesQueued.textContent = '0';
          criticalErrors.textContent = String(sampleResults.severity.critical);
          warningCount.textContent = String(sampleResults.violations - sampleResults.severity.critical);
          resultsReady = true;
          populateResults();
          scanStatus.innerHTML = '<p>✅ Scan completed. Review the overview and drilldown for details.</p>';
          setTimeout(() => setStep(3, { focusPanel: true }), 400);
        }
      }, 1000);
    }

    function handleNext() {
      if (currentStep === 1) {
        setStep(currentStep + 1, { focusPanel: true });
        simulateScanProgress();
        return;
      }

      if (currentStep < steps.length - 1) {
        setStep(currentStep + 1, { focusPanel: true });
      } else {
        exportStatus.innerHTML = '<p>Wizard complete. Ready to export or restart.</p>';
      }
    }

    function handlePrev() {
      if (currentStep > 0) {
        setStep(currentStep - 1, { focusPanel: true });
      }
    }

    function handleExport(type) {
      const labels = {
        pdf: 'PDF report',
        json: 'JSON data',
        csv: 'CSV log'
      };
      exportStatus.innerHTML = `<p>Preparing your ${labels[type] ?? type}…</p>`;
      setTimeout(() => {
        exportStatus.innerHTML = `<p>✅ ${labels[type] ?? type} ready for download.</p>`;
      }, 1200);
    }

    prevBtn.addEventListener('click', handlePrev);
    nextBtn.addEventListener('click', handleNext);
    exportBtn.addEventListener('click', () => handleExport('pdf'));
    exportJsonBtn.addEventListener('click', () => handleExport('json'));
    exportCsvBtn.addEventListener('click', () => handleExport('csv'));
    document.querySelector('.stepper').addEventListener('click', handleStepperClick);
    scanForm.addEventListener('submit', handleScanSubmit);
    document.querySelectorAll('input[name="scanType"]').forEach((radio) => {
      radio.addEventListener('change', handleScanTypeChange);
    });

    setStep(currentStep, { focusPanel: true });
    handleScanTypeChange();
  </script>
</body>
</html>
